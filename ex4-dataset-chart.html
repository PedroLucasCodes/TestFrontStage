<script src="https://code.jquery.com/jquery-3.3.1.slim.min.js"
    integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo"
    crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/popper.js@1.14.7/dist/umd/popper.min.js"
    integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1"
    crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@4.3.1/dist/js/bootstrap.min.js"
    integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM"
    crossorigin="anonymous"></script>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.3.1/dist/css/bootstrap.min.css"
    integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

<div id="app">
    <div class="py-3">
        <h4> Fix it for me? ü§ï</h4>
        <div class="card mx-auto" style="width: 840px;">
            <div class="card-body">
                <h5 class="card-title">Ol√°! sou um c√≥digo de gr√°fico e dataset üòä</h5>
                <div class="card-text">Posso plotar um gr√°fico a partir de um dataset!</div>
                <div class="card-text">No gr√°fico a seguir estou usando um dataset est√°tico.</div>
                <div class="card-text">Por√©m gostaria de usar o dataset randomico.</div>
            </div>
            <ul class="list-group list-group-flush">
                <li class="list-group-item">
                    <span> Dataset gerado randomicamente:</span>
                    <small id="dataset" class=""></small>
                </li>
            </ul>
            <canvas id="myChart"></canvas>
        </div>
    </div>
</div>


<!-- Styles -->
<style>
    #myChart {
        width: 100%;
        height: 500px;
    }
</style>


<!-- Chart code -->
<script>

    function createChart() {
        const ctx = document.getElementById('myChart');

        new Chart(ctx, {
            type: 'bar',
            data: {
                labels: ['Wesley', 'Pedro', 'Glauco', 'Gabriel', 'LucasP', 'Jo√£o', 'Natan', 'Luca', 'Yago', 'Erison', 'LucasX'],
                datasets: [{
                    label: 'SD',
                    data: [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11],
                }]
            },
        });
    }



    function generateData(index) {
        const value = Math.round((Math.random() * 100 - 30) + 50);
        return {
            label: `Label ${index}`,
            value
        };
    }

    function generateDataset(count) {
        var data = [];
        for (var i = 0; i < count; ++i) {
            data.push(generateData(i + 1));
        }
        return data;
    }

    function writeDataset(dataset) {
        console.log("[INFO] Writing on screen...");
        console.log("[INFO] Raw Values:", dataset);
        let el = "<ul>"
        dataset.forEach(e => {
            const { label } = e;
            const value = parseFloat(e.value).toFixed(2)
            el += `<li>${label}: ${value}</li>`
        });
        el += "</ul>"
        $("#dataset").html(el);
    }

    function start() {
        createChart();
        let dataset_random = generateDataset(10);
        writeDataset(dataset_random);
    }

    start();
</script>